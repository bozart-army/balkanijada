generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum PlaceCategory {
  FOOD
  NIGHTLIFE
  CULTURE
  SERVICES
  SPORTS
  RELIGION
  COMMUNITY
  OTHER
}

enum PlaceStatus {
  DRAFT
  PENDING_REVIEW
  PUBLISHED
  ARCHIVED
}

enum LanguageCode {
  DE
  EN
  EN_US
  HR
  SR
  BS
}

model City {
  id           String   @id @default(uuid())
  name         String
  countryCode  String   // ISO code (e.g. DE, AT, CH)
  lat          Float?
  lon          Float?
  places       Place[]
  createdAt    DateTime @default(now())
}

model Place {
  id            String             @id @default(uuid())
  category      PlaceCategory
  address       String
  cityId        String
  city          City               @relation(fields: [cityId], references: [id])
  countryCode   String
  lat           Float?
  lon           Float?
  tags          String[]           // e.g. ["cevapi", "turbo_folk"]
  website       String?
  instagram     String?
  facebook      String?
  phone         String?
  images        String[]           // image URLs
  status        PlaceStatus        @default(DRAFT)
  ownerUserId   String?
  translations  PlaceTranslation[]
  createdAt     DateTime           @default(now())
  updatedAt     DateTime           @updatedAt
}

model PlaceTranslation {
  id          String        @id @default(uuid())
  placeId     String
  place       Place         @relation(fields: [placeId], references: [id])
  lang        LanguageCode
  name        String
  description String
  slug        String        @unique
}

enum EventCategory {
  CONCERT
  PARTY
  CULTURE
  COMMUNITY
  FOOD
  OTHER
}

enum EventStatus {
  DRAFT
  PENDING_REVIEW
  PUBLISHED
  ARCHIVED
}

enum StoryCategory {
  CITY_GUIDE
  DIASPORA_STORY
  FOOD_CULTURE
  INTERVIEW
  OTHER
}

model Event {
  id           String          @id @default(uuid())
  placeId      String?
  place        Place?          @relation(fields: [placeId], references: [id])
  category     EventCategory
  startTime    DateTime
  endTime      DateTime?
  cityId       String
  city         City            @relation(fields: [cityId], references: [id])
  countryCode  String
  images       String[]
  tags         String[]
  status       EventStatus     @default(DRAFT)
  organizerId  String?
  translations EventTranslation[]
  createdAt    DateTime        @default(now())
  updatedAt    DateTime        @updatedAt
}

model EventTranslation {
  id          String        @id @default(uuid())
  eventId     String
  event       Event         @relation(fields: [eventId], references: [id])
  lang        LanguageCode
  title       String
  description String
  slug        String        @unique
}

model Story {
  id           String              @id @default(uuid())
  category     StoryCategory
  coverImage   String?
  authorId     String?
  translations StoryTranslation[]
  createdAt    DateTime            @default(now())
  updatedAt    DateTime            @updatedAt
}

model StoryTranslation {
  id        String        @id @default(uuid())
  storyId   String
  story     Story         @relation(fields: [storyId], references: [id])
  lang      LanguageCode
  title     String
  content   String
  slug      String        @unique
}

